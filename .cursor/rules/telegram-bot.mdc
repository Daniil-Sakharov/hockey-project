---
description: Telegram bot implementation guidelines
---

# Telegram Bot Implementation

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **github.com/go-telegram-bot-api/telegram-bot-api** (tgbotapi) - –ø–æ–ø—É–ª—è—Ä–Ω–∞—è –∏ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: **gopkg.in/telebot.v3** - –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```go
type Bot struct {
    api       *tgbotapi.BotAPI
    playerSvc *PlayerService
    statsSvc  *StatsService
}
```

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- `/help` - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
- `/search` - –ø–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤
- `/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞

### –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤
- `/findbyage [min] [max]` - –ø–æ–∏—Å–∫ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É
- `/findbyteam [–Ω–∞–∑–≤–∞–Ω–∏–µ]` - –ø–æ–∏—Å–∫ –ø–æ –∫–æ–º–∞–Ω–¥–µ
- `/findbyname [–∏–º—è]` - –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
- `/topscorers [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]` - —Ç–æ–ø –±–æ–º–±–∞—Ä–¥–∏—Ä–æ–≤

## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
```go
keyboard := tgbotapi.NewInlineKeyboardMarkup(
    tgbotapi.NewInlineKeyboardRow(
        tgbotapi.NewInlineKeyboardButtonData("–ü–æ –≤–æ–∑—Ä–∞—Å—Ç—É", "search_age"),
        tgbotapi.NewInlineKeyboardButtonData("–ü–æ –∫–æ–º–∞–Ω–¥–µ", "search_team"),
    ),
)
```

### Callback queries
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ inline –∫–Ω–æ–ø–∫–∏
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∑–∞–ø—Ä–æ—Å—É

## –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

### Markdown/HTML
```go
msg.ParseMode = "Markdown"
// –∏–ª–∏
msg.ParseMode = "HTML"
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```
üèí *–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –û–≤–µ—á–∫–∏–Ω*
–í–æ–∑—Ä–∞—Å—Ç: 38
–ö–æ–º–∞–Ω–¥–∞: Washington Capitals
–ü–æ–∑–∏—Ü–∏—è: Left Wing

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ–∑–æ–Ω–∞ 2024-25:
‚öΩ –ì–æ–ª—ã: 25
üéØ –ü–µ—Ä–µ–¥–∞—á–∏: 18
üìà –û—á–∫–∏: 43
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (5-10)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞

## Middleware pattern
```go
func (b *Bot) withLogging(handler func(*tgbotapi.Update)) func(*tgbotapi.Update) {
    return func(update *tgbotapi.Update) {
        // log
        handler(update)
    }
}
```

## Rate Limiting
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```go
type BotConfig struct {
    Token          string
    Debug          bool
    MaxResultsPage int
}
```

## –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞ (in-memory –¥–ª—è MVP)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –¥–ª—è production –≤–µ—Ä—Å–∏–∏

## Best Practices
1. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
2. –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
3. Graceful shutdown
4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
