{
  "annotations": { "list": [] },
  "editable": true,
  "panels": [
    {
      "title": "CPU Usage",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 0 },
      "targets": [{
        "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)",
        "legendFormat": "CPU %",
        "datasource": { "type": "prometheus", "uid": "prometheus" }
      }],
      "fieldConfig": { "defaults": { "unit": "percent", "max": 100 } }
    },
    {
      "title": "Memory Usage",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 0 },
      "targets": [{
        "expr": "(1 - node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes) * 100",
        "legendFormat": "Memory %",
        "datasource": { "type": "prometheus", "uid": "prometheus" }
      }],
      "fieldConfig": { "defaults": { "unit": "percent", "max": 100 } }
    },
    {
      "title": "Disk Usage",
      "type": "gauge",
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 8 },
      "targets": [{
        "expr": "(1 - node_filesystem_avail_bytes{mountpoint=\"/\"} / node_filesystem_size_bytes{mountpoint=\"/\"}) * 100",
        "datasource": { "type": "prometheus", "uid": "prometheus" }
      }],
      "fieldConfig": { "defaults": { "unit": "percent", "max": 100, "thresholds": { "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 70}, {"color": "red", "value": 90}] } } }
    },
    {
      "title": "PostgreSQL Connections",
      "type": "stat",
      "gridPos": { "h": 4, "w": 8, "x": 8, "y": 8 },
      "targets": [{
        "expr": "sum(pg_stat_activity_count{datname=\"hockey_stats\"})",
        "datasource": { "type": "prometheus", "uid": "prometheus" }
      }],
      "fieldConfig": { "defaults": { "unit": "short" } }
    },
    {
      "title": "PostgreSQL DB Size",
      "type": "stat",
      "gridPos": { "h": 4, "w": 8, "x": 16, "y": 8 },
      "targets": [{
        "expr": "pg_database_size_bytes{datname=\"hockey_stats\"}",
        "datasource": { "type": "prometheus", "uid": "prometheus" }
      }],
      "fieldConfig": { "defaults": { "unit": "bytes" } }
    }
  ],
  "refresh": "30s",
  "schemaVersion": 39,
  "tags": ["system", "hockey"],
  "time": { "from": "now-1h", "to": "now" },
  "title": "System Overview",
  "uid": "system-overview"
}
