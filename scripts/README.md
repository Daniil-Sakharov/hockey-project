# Database Utility Scripts

–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ HockeyProject.

## üìä –°–∫—Ä–∏–ø—Ç—ã –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### `db_stats.go`
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±—ã—Å—Ç—Ä—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—É—Ä–Ω–∏—Ä–æ–≤, –∫–æ–º–∞–Ω–¥, –∏–≥—Ä–æ–∫–æ–≤, —Å–≤—è–∑–µ–π, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
task db:stats
# –∏–ª–∏
go run scripts/db_stats.go
```

---

### `db_report.go`
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç:
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö (–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å season/dates)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø–æ–∑–∏—Ü–∏—è–º
- –¢–û–ü-5 —Ç—É—Ä–Ω–∏—Ä–æ–≤ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
- –ü—Ä–∏–º–µ—Ä—ã –∏–≥—Ä–æ–∫–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
task db:report
# –∏–ª–∏
go run scripts/db_report.go
```

---

## üîç –°–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### `verify_player_stats.go`
**–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –ó–ê–ü–£–°–ö–ê–¢–¨ –ü–û–°–õ–ï –ü–ê–†–°–ò–ù–ì–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ò**

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–≥—Ä–æ–∫–æ–≤:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–æ–≤ –∏–º–µ—é—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ –±–µ–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –≥–æ–¥–∞–º —Ä–æ–∂–¥–µ–Ω–∏—è
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –µ–≥–æ —Ç—É—Ä–Ω–∏—Ä—ã
- –í—ã–≤–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–∫—Ä—ã—Ç–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
go run scripts/verify_player_stats.go
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üìä –û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:
  –í—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤:           14,547
  –°–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π:          7,246 (49.81%)
  –ë–ï–ó —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:          7,301 (50.19%)

üìÖ –ò–ì–†–û–ö–ò –ë–ï–ó –°–¢–ê–¢–ò–°–¢–ò–ö–ò –ü–û –ì–û–î–ê–ú –†–û–ñ–î–ï–ù–ò–Ø:

üî¥ –ì–û–î –†–û–ñ–î–ï–ù–ò–Ø: 2014
  –í—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤:    1131
  –°–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π:   79 (6.98%)
  –ë–ï–ó —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:   1052 (93.02%)
```

---

### `verify_tournament_stats.go`
**–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –ó–ê–ü–£–°–ö–ê–¢–¨ –ü–û–°–õ–ï –ü–ê–†–°–ò–ù–ì–ê –°–¢–ê–¢–ò–°–¢–ò–ö–ò**

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Ç—É—Ä–Ω–∏—Ä–∞–º:
- –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Ç—É—Ä–Ω–∏—Ä—ã –ø–æ —É—Ä–æ–≤–Ω—é –ø–æ–∫—Ä—ã—Ç–∏—è (100%, 80-99%, 50-79%, 1-49%, 0%)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤ –∏ –∑–∞–ø–∏—Å–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç—É—Ä–Ω–∏—Ä–∞
- –í—ã–≤–æ–¥–∏—Ç URL —Ç—É—Ä–Ω–∏—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
go run scripts/verify_tournament_stats.go
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
‚úÖ –û–¢–õ–ò–ß–ù–û–ï –ü–û–ö–†–´–¢–ò–ï (100%): 15 —Ç—É—Ä–Ω–∏—Ä–æ–≤
‚ö†Ô∏è  –°–†–ï–î–ù–ï–ï –ü–û–ö–†–´–¢–ò–ï (50-79%): 3 —Ç—É—Ä–Ω–∏—Ä–∞
‚ùå –ë–ï–ó –°–¢–ê–¢–ò–°–¢–ò–ö–ò (0%): 7 —Ç—É—Ä–Ω–∏—Ä–æ–≤
```

---

## üóëÔ∏è –£—Ç–∏–ª–∏—Ç—ã –æ—á–∏—Å—Ç–∫–∏

### `db_clear.go`
–û—á–∏—â–∞–µ—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î (tournaments, teams, players, player_teams, player_statistics).

**‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:** –£–¥–∞–ª—è–µ—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î!

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
task db:clear
# –∏–ª–∏
go run scripts/db_clear.go
```

---

## üöÄ –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ä–µ–µ—Å—Ç—Ä–∞ –∏–≥—Ä–æ–∫–æ–≤:
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä —Ä–µ–µ—Å—Ç—Ä–∞
task registry:parse

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å
task db:stats
task db:report
```

### –ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
task stats:parse

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ –∏–≥—Ä–æ–∫–æ–≤
go run scripts/verify_player_stats.go

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç—É—Ä–Ω–∏—Ä–æ–≤
go run scripts/verify_tournament_stats.go

# 4. –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
task db:stats
```

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å –Ω—É–ª—è:
```bash
# 1. –û—á–∏—Å—Ç–∏—Ç—å –ë–î
task db:clear

# 2. –ü–∞—Ä—Å–∏—Ç—å —Ä–µ–µ—Å—Ç—Ä –∏–≥—Ä–æ–∫–æ–≤
task registry:parse

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
task db:report

# 4. –ü–∞—Ä—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
task stats:parse

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ
go run scripts/verify_player_stats.go
go run scripts/verify_tournament_stats.go
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `DATABASE_URL`
- –°–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Taskfile –∫–æ–º–∞–Ω–¥—ã
- –°–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –ü–û–°–õ–ï –ø–∞—Ä—Å–∏–Ω–≥–∞
